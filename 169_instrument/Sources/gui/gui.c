/*******************************************************************/
/*                         GUI 图形化用户界面                      */
/* 文件名: gui.c                                                  */
/* 平台: TOP51 + keil C51                                            */
/* 公司: 爱晶电子                                                  */
/* 网址：http://www.ajdz.net                                       */
// 描  述: TFT图形用户接口层程序集
/* 作者              		日期         		注释       */
/*~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/
/* 王伟民		08/10/20			原始文件   */
/* 王伟民		2010/3/30		V1.1移植到STC 高速51单片机*/
/* 王伟民		2010/4/29		V1.2完善了显示预定义汉字字符串函数，不再需要人工修改字符数了*/
/*                        增加了画矩形和显示长整数和长变量函数*/
/*******************************************************************/
/*说明： 数字、英文字符为8*16点阵字形 中文字符为16*16点阵字形                                        */
/*******************************************************************/

#include "config.h"
#include "bmp.h"
//#include "chinese.h"



/********************************************  图形驱动  ********************************************/
/************************************
清屏
入口参数： b_color是背景颜色。
出口参数: 无
说明：使用背景颜色清除TFT模块屏幕的全部显示内容。
*************************************/
void GUI_clearscreen(unsigned int b_color)
{
	unsigned int i,j;
//	LCD_setwindow(0,0,240,320);
	LCD_setwindow(0,0,271,479);
	for (i=0; i<480; i++)
	{
		for(j=0; j<272; j++)
			write_data_u16(b_color);
	}
}


/*********************************************
画点
入口参数： (x，y)是点的坐标，color 是点的颜色。
出口参数: 无
说明：用指定的颜色在指定的坐标位置上画出一个点。
**********************************************/
void GUI_Point(unsigned int x, unsigned int y, unsigned int color)
{
	LCD_setxy(x,y);
	write_data_u16(color);
}


/**********************************************************
画横线
入口参数： (x，y)是横线起点坐标，length是横线长度，color 是横线颜色。
出口参数: 无
说明：用指定的颜色在指定位置上画出指定长度的一条横线。
************************************************************/
void GUI_HLine(unsigned int x, unsigned int y, unsigned char length, unsigned int color)
{
	LCD_setwindow(x,y,x+length-1,y);
	do
	{
		write_data_u16(color);//逐点显示，描出水平线
		length--;
	}
	while(length);
}

/**********************************************************
画竖线
入口参数： (x，y)是竖线起点坐标，high 竖线高度，color 是竖线颜色。
出口参数: 无
说明：用指定的颜色在指定位置上画出指定长度的一条竖线。
************************************************************/
void GUI_RLine(unsigned int x, unsigned int y, unsigned int high, unsigned int color)
{
	LCD_setwindow(x,y,x,y+high-1);
	do
	{
		write_data_u16(color);// 逐点显示，描出垂直线
		high--;
	}
	while(high);
}


/********************************************************************
画直线（可以画任意方向直线，包括横线、竖线、斜线）。
入口参数： (x1,y1)起点, (x2,y2)终点, color颜色。
出口参数: 无
说明：用指定的颜色在指定的两点间画出一条直线。
***********************************************************************/
void GUI_line(unsigned int x1,unsigned int y1,unsigned int x2,unsigned int y2,unsigned int color)
{
	unsigned int t;
	int xerr=0,yerr=0,delta_x,delta_y,distance;
	int incx,incy;
	unsigned int row,col;
	delta_x = x2-x1;//计算坐标增量
	delta_y = y2-y1;
	col=x1;
	row=y1;
	if(delta_x>0) incx=1;//设置单步方向
	else
	{
		if(delta_x==0) incx=0;//垂直线
		else
		{
			incx=-1;
			delta_x=-delta_x;
		}
	}
	if(delta_y>0)incy=1;
	else
	{
		if(delta_y==0) incy=0;//水平线
		else
		{
			incy=-1;
			delta_y=-delta_y;
		}
	}
	if(delta_x>delta_y) distance=delta_x;//选取基本增量坐标轴
	else distance=delta_y;

	for(t=0; t<=distance+1; t++)
	{
		//画线输出
		GUI_Point(col, row, color);
		xerr+=delta_x;
		yerr+=delta_y;
		if(xerr>distance)
		{
			xerr-=distance;
			col+=incx;
		}
		if(yerr>distance)
		{
			yerr-=distance;
			row+=incy;
		}
	}
}


/**********************************************************
显示图片(图标)
入口参数：(x，y)是开始点的坐标，length是图片长度，high是图片高度。//pic 图片数组的指针
出口参数: 无
说明：用指定位置上显示事先定义的图片。
要显示的图片事先定义在bmp.h中的pic[]数组中，
如果想修改图片大小、内容，请修改bmp.h中的pic[]数组，
建议用Image2Lcd软件将你要显示的图象自动转换为数组数据。
************************************************************/
void GUI_DisPicture(unsigned int x, unsigned int y, unsigned char length, unsigned int high ,const unsigned char *pic)
//void GUI_DisPicture(unsigned int x, unsigned int y, unsigned char length, unsigned int high)
{
	unsigned int temp=0,tmp=0,num=0;
	LCD_setwindow(x,y,x+length-1,y+high-1);
	num=length*high*2;
	do
	{
		//temp=pic[tmp]|( pic[tmp+1]<<8);
		temp=pic[tmp+1];
		temp=temp<<8;
		temp=temp|pic[tmp];
		write_data_u16(temp);//逐点显示
		tmp+=2;
	}
	while(tmp<num);
}
/*********************************************
画实心矩形
入口参数： (sx,sy)左上角顶点坐标, (ex,ey)右下角顶点坐标, color颜色
出口参数: 无
说明：在指定位置上画出实心矩形。
**********************************************/
void GUI_box(unsigned int sx,unsigned int sy,unsigned int ex,unsigned int ey,unsigned int color)
{
	unsigned int temp;
	LCD_setwindow(sx,sy,ex,ey);
	sx=ex-sx+1;
	sy=ey-sy+1;

	while(sx--)
	{
		temp=sy;
		while(temp--)
		{
			write_data_u16(color);
		}
	}
}
/*********************************************
画空心矩形
入口参数： (sx,sy)左上角顶点坐标, (ex,ey)右下角顶点坐标, color颜色
出口参数: 无
说明：在指定位置上画出空心矩形。
**********************************************/
void GUI_rectangle( unsigned int sx,unsigned int sy,unsigned int ex,unsigned int ey,unsigned int color)
{
	unsigned int v;
	LCD_setwindow(sx,sy,ex,sy);
	v = ex - sx;
	do
	{
		write_data_u16(color);
	}while(--v);
	LCD_setwindow(sx,ey,ex,ey);
	v = ex - sx;
	do
	{
		write_data_u16(color);
	}while(--v);
	LCD_setwindow(sx,sy,sx,ey);
	v = ey - sy;
	do
	{
		write_data_u16(color);
	}while(--v);
	LCD_setwindow(ex,sy,ex,ey);
	v = ey - sy;
	do
	{
		write_data_u16(color);
	}while(--v);
}
/**
  * @brief  显示位图，数据要求，横向取模，高位在前，不进行字节压缩；函数不对数据有效性进行分析;
  * @param  x:起始横坐标 
  * @param  y:起始纵坐标
  * @param  w:位图宽度 单位bit 
  * @param  h:位图高度 单位bit
  * @param  data[in]:位图数据
  * @param  fColor:字符颜色
  * @param  bColor:背景颜色
  * @retval 返回下个字符横坐标
  */
unsigned int LCD_PutBmp(unsigned int x, unsigned int y, unsigned int w,unsigned int h,const unsigned char * __far data, unsigned int fColor, unsigned int bColor)
{
	unsigned int i,j,k,u16temp,len;
	if((0 == w)||(0 == h))
	{
		return x;
	}
	LCD_setwindow(x,y,x+w-1, y+h-1);
	len = ((w +7)/8 * h);//不足8bit的补一个字节
	k = 0;
	for (i=0; i<len; i++)
	{
		
		for(j=0; j<8; j++)
		{
			u16temp = 0x80>>j;
			if (u16temp & data[i])
			{
				write_data_u16(fColor);
			}
			else
			{
				write_data_u16(bColor);
			}
			k++;
			if(k>=w)
			{
				k = 0;
				break;
			}
		}
	}
	return (x + w) ;
}

void draw_logo(){
		U16 drawColor = 0x0000;
		U16 index = 0;
		U16 len = sizeof(logo) / sizeof(logo[0]);
		U8 length = 0;
		U8 x = LOGO_X_START;
		U8 y = LOGO_Y_START;

		LCD_setwindow(x,y,x+233,y+118);
		for (index = 0; index < len/2; ++index)
		{
			length = logo[2*index+1];
			drawColor = logo_color[logo[2*index]];
			do
			{
				write_data_u16(drawColor);//逐点显示，描出水平线
				length--;
			}
			while(length);
		}
}

/********************************************  字形驱动  ********************************************/
#include "font16x8.h"
struct  typFNT_GB2412                 // 汉字字模数据结构
{
	unsigned char  Index[1];               // 汉字内码索引
	unsigned char  Msk[36];                        // 点阵码数据
};

//!< 纵向取模
const struct  typFNT_GB2412 codeGB_2412[] =
{

	'1',0x00,0x00,0x01,0x01,0x01,0x03,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,/*"1",0*/
	/* (12 X 24 , 宋体 )*/
	'2',0x00,0x01,0x02,0x04,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0xC0,0xC0,0x00,0x01,0x02,0x04,0x1C,0xF8,0xE0,0x00,0x00,0x00,0x38,0x58,0x98,0x18,0x18,0x18,0x18,0x18,0xF8,0x00,0x00,/*"2",1*/
	/* (12 X 24 , 宋体 )*/
	'3',0x00,0x01,0x03,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x08,0x08,0x18,0xF4,0xE7,0x01,0x00,0x00,0x00,0xE0,0xF0,0x08,0x08,0x08,0x08,0x18,0xF0,0xE0,0x00,0x00,/*"3",2*/
	/* (12 X 24 , 宋体 )*/
	'4',0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x07,0x0F,0x00,0x00,0x00,0x00,0x03,0x0D,0x11,0x61,0x81,0x01,0xFF,0xFF,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0xF8,0x08,0x08,0x00,/*"4",3*/
	/* (12 X 24 , 宋体 )*/
	'5',0x00,0x00,0x07,0x06,0x06,0x06,0x06,0x06,0x06,0x06,0x00,0x00,0x00,0x00,0xFC,0x08,0x10,0x10,0x10,0x18,0x0F,0x07,0x00,0x00,0x00,0xE0,0xD0,0x08,0x08,0x08,0x08,0x38,0xF0,0xC0,0x00,0x00,/*"5",4*/
	/* (12 X 24 , 宋体 )*/
	'6',0x00,0x00,0x01,0x03,0x02,0x04,0x04,0x04,0x07,0x03,0x00,0x00,0x00,0x3F,0xFF,0x84,0x08,0x10,0x10,0x10,0x18,0x0F,0x07,0x00,0x00,0x80,0xE0,0x30,0x18,0x08,0x08,0x08,0x10,0xF0,0xC0,0x00,/*"6",5*/
	/* (12 X 24 , 宋体 )*/
	'7',0x00,0x00,0x03,0x07,0x06,0x06,0x06,0x06,0x06,0x07,0x06,0x00,0x00,0x00,0xC0,0x00,0x00,0x00,0x07,0x18,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0xF8,0x00,0x00,0x00,0x00,0x00,/*"7",6*/
	/* (12 X 24 , 宋体 )*/
	'8',0x00,0x01,0x03,0x06,0x04,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0xE1,0xF7,0x34,0x18,0x18,0x0C,0x0C,0x16,0xF3,0xC1,0x00,0x00,0xE0,0xF0,0x10,0x08,0x08,0x08,0x08,0x18,0xF0,0xE0,0x00,/*"8",7*/
	/* (12 X 24 , 宋体 )*/
	'9',0x00,0x00,0x03,0x03,0x04,0x04,0x04,0x04,0x03,0x01,0x00,0x00,0x00,0xF8,0xFC,0x06,0x02,0x02,0x02,0x04,0x08,0xFF,0x7F,0x00,0x00,0x00,0x30,0x38,0x08,0x08,0x08,0x10,0xF0,0xC0,0x00,0x00,/*"9",8*/
	/* (12 X 24 , 宋体 )*/
	'0',0x00,0x00,0x01,0x03,0x06,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0x7F,0xFF,0x80,0x00,0x00,0x00,0x00,0x80,0xFF,0x7F,0x00,0x00,0x80,0xE0,0x70,0x18,0x08,0x08,0x18,0x70,0xE0,0x80,0x00,/*"0",9*/
	/* (12 X 24 , 宋体 )*/
	'A',0x00,0x00,0x00,0x00,0x01,0x07,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x3E,0xC2,0x02,0xE2,0xFE,0x1F,0x01,0x00,0x00,0x08,0x18,0xF8,0x08,0x00,0x00,0x00,0x00,0xC8,0xF8,0x38,0x08,/*"A",0*/
	/* (12 X 24 , 宋体 )*/
	'B',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0xFF,0xFF,0x08,0x08,0x08,0x08,0x18,0xF4,0xE7,0x01,0x00,0x08,0xF8,0xF8,0x08,0x08,0x08,0x08,0x08,0x18,0xF0,0xE0,0x00,/*"B",1*/
	/* (12 X 24 , 宋体 )*/
	'C',0x00,0x00,0x01,0x03,0x02,0x04,0x04,0x04,0x04,0x06,0x07,0x00,0x00,0x3F,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x80,0xE0,0x70,0x18,0x08,0x08,0x08,0x10,0x20,0xC0,0x00,/*"C",2*/
	/* (12 X 24 , 宋体 )*/
	'D',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x02,0x03,0x01,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x80,0xFF,0x7F,0x00,0x08,0xF8,0xF8,0x08,0x08,0x08,0x18,0x10,0x70,0xE0,0x80,0x00,/*"D",3*/
	/* (12 X 24 , 宋体 )*/
	'E',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x04,0x06,0x01,0x00,0x00,0xFF,0xFF,0x08,0x08,0x08,0x08,0x3E,0x00,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x08,0x08,0x08,0x08,0x08,0x18,0x60,0x00,/*"E",4*/
	/* (12 X 24 , 宋体 )*/
	'F',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x06,0x06,0x01,0x00,0x00,0xFF,0xFF,0x08,0x08,0x08,0x08,0x3E,0x00,0x00,0x80,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"F",5*/
	/* (12 X 24 , 宋体 )*/
	'G',0x00,0x00,0x01,0x03,0x06,0x04,0x04,0x04,0x02,0x07,0x00,0x00,0x00,0x3F,0xFF,0x80,0x00,0x00,0x02,0x02,0x03,0x83,0x02,0x02,0x00,0x80,0xE0,0x70,0x18,0x08,0x08,0x08,0xF0,0xF0,0x00,0x00,/*"G",6*/
	/* (12 X 24 , 宋体 )*/
	'H',0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x04,0x07,0x07,0x04,0x00,0xFF,0xFF,0x08,0x08,0x08,0x08,0x08,0x08,0xFF,0xFF,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,/*"H",7*/
	/* (12 X 24 , 宋体 )*/
	'I',0x00,0x00,0x04,0x04,0x04,0x07,0x07,0x04,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,/*"I",8*/
	/* (12 X 24 , 宋体 )*/
	'J',0x00,0x00,0x00,0x00,0x04,0x04,0x04,0x07,0x07,0x04,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x06,0x07,0x01,0x01,0x01,0x03,0xFE,0xFC,0x00,0x00,0x00,/*"J",9*/
	/* (12 X 24 , 宋体 )*/
	'K',0x04,0x07,0x07,0x04,0x00,0x00,0x04,0x05,0x06,0x04,0x04,0x00,0x00,0xFF,0xFF,0x0C,0x18,0x3E,0xC7,0x03,0x00,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x80,0xC8,0xF8,0x38,0x18,0x08,/*"K",10*/
	/* (12 X 24 , 宋体 )*/
	'L',0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x08,0x08,0x08,0x08,0x08,0x18,0x60,0x00,/*"L",11*/
	/* (12 X 24 , 宋体 )*/
	'M',0x04,0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x07,0x07,0x07,0x04,0x00,0xFF,0x80,0xFC,0x7F,0x03,0x07,0x78,0x80,0xFF,0xFF,0x00,0x08,0xF8,0x08,0x00,0xC0,0xF8,0xC0,0x00,0x08,0xF8,0xF8,0x08,/*"M",12*/
	/* (12 X 24 , 宋体 )*/
	'N',0x04,0x07,0x07,0x03,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x04,0x00,0xFF,0x00,0xC0,0xE0,0x38,0x1E,0x07,0x01,0x00,0xFF,0x00,0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0xC0,0xF0,0xF8,0x00,/*"N",13*/
	/* (12 X 24 , 宋体 )*/
	'O',0x00,0x00,0x01,0x03,0x06,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0x7F,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0xFF,0x7F,0x00,0x00,0x80,0xE0,0x70,0x18,0x08,0x08,0x18,0x30,0xE0,0x80,0x00,/*"O",14*/
	/* (12 X 24 , 宋体 )*/
	'P',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0xFF,0xFF,0x04,0x04,0x04,0x04,0x04,0x0C,0xF8,0xF0,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"P",15*/
	/* (12 X 24 , 宋体 )*/
	'Q',0x00,0x00,0x01,0x03,0x06,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0x00,0x7F,0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0xFF,0x7F,0x00,0x00,0x80,0xE0,0x70,0x88,0x88,0xC8,0x3C,0x3E,0xE6,0x84,0x00,/*"Q",16*/
	/* (12 X 24 , 宋体 )*/
	'R',0x04,0x07,0x07,0x04,0x04,0x04,0x04,0x04,0x06,0x03,0x01,0x00,0x00,0xFF,0xFF,0x08,0x08,0x0C,0x0F,0x0B,0x10,0xF0,0xE0,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x00,0xC0,0xF0,0x38,0x08,0x08,/*"R",17*/
	/* (12 X 24 , 宋体 )*/
	'S',0x00,0x01,0x03,0x06,0x04,0x04,0x04,0x04,0x02,0x02,0x07,0x00,0x00,0xE0,0xF0,0x30,0x18,0x18,0x0C,0x0C,0x06,0x07,0x81,0x00,0x00,0xF8,0x30,0x10,0x08,0x08,0x08,0x08,0x18,0xF0,0xE0,0x00,/*"S",18*/
	/* (12 X 24 , 宋体 )*/
	'T',0x01,0x06,0x04,0x04,0x04,0x07,0x07,0x04,0x04,0x04,0x06,0x01,0x80,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x00,0x00,/*"T",19*/
	/* (12 X 24 , 宋体 )*/
	'U',0x04,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x04,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0xE0,0xF0,0x18,0x08,0x08,0x08,0x08,0x08,0x10,0xE0,0x00,/*"U",20*/
	/* (12 X 24 , 宋体 )*/
	'V',0x04,0x06,0x07,0x07,0x04,0x00,0x00,0x00,0x04,0x07,0x06,0x04,0x00,0x00,0xE0,0xFE,0x1F,0x01,0x00,0x01,0x3E,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0xE0,0xF8,0x38,0xE0,0x00,0x00,0x00,0x00,/*"V",21*/
	/* (12 X 24 , 宋体 )*/
	'W',0x04,0x07,0x07,0x04,0x00,0x07,0x07,0x04,0x00,0x04,0x07,0x04,0x00,0xE0,0xFF,0x1F,0x07,0xF8,0xFF,0x3F,0x07,0xF8,0x00,0x00,0x00,0x00,0xC0,0xF8,0xC0,0x00,0x80,0xF8,0xC0,0x00,0x00,0x00,/*"W",22*/
	/* (12 X 24 , 宋体 )*/
	'X',0x00,0x04,0x06,0x07,0x05,0x00,0x00,0x04,0x07,0x06,0x04,0x00,0x00,0x00,0x00,0xC0,0xF1,0x3E,0x1F,0x63,0x80,0x00,0x00,0x00,0x00,0x08,0x18,0x78,0xC8,0x00,0x80,0xE8,0xF8,0x18,0x08,0x00,/*"X",23*/
	/* (12 X 24 , 宋体 )*/
	'Y',0x04,0x06,0x07,0x07,0x04,0x00,0x00,0x00,0x04,0x07,0x06,0x04,0x00,0x00,0x80,0xE0,0x7C,0x1F,0x07,0x18,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0xF8,0x08,0x08,0x00,0x00,0x00,/*"Y",24*/
	/* (12 X 24 , 宋体 )*/
	'Z',0x00,0x01,0x06,0x04,0x04,0x04,0x04,0x05,0x07,0x07,0x04,0x00,0x00,0x00,0x00,0x00,0x03,0x0F,0x7C,0xF0,0xC0,0x00,0x00,0x00,0x00,0x08,0x38,0xF8,0xE8,0x08,0x08,0x08,0x08,0x18,0x60,0x00,/*"Z",25*/
	/* (12 X 24 , 宋体 )*/
	'a',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x19,0x1B,0x22,0x26,0x24,0x24,0x3F,0x1F,0x00,0x00,0x00,0xF0,0xF8,0x18,0x08,0x08,0x08,0x10,0xF8,0xF8,0x08,0x18,/*"a",26*/
	/* (12 X 24 , 宋体 )*/
	'b',0x00,0x04,0x07,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x18,0x10,0x20,0x20,0x30,0x1F,0x0F,0x00,0x00,0x00,0xF8,0xF0,0x18,0x08,0x08,0x08,0x18,0xF0,0xC0,0x00,/*"b",27*/
	/* (12 X 24 , 宋体 )*/
	'c',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x1F,0x18,0x20,0x20,0x20,0x3C,0x1C,0x00,0x00,0x00,0x00,0xC0,0xF0,0x30,0x08,0x08,0x08,0x08,0x10,0x60,0x00,0x00,/*"c",28*/
	/* (12 X 24 , 宋体 )*/
	'd',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x07,0x0F,0x00,0x00,0x00,0x07,0x1F,0x38,0x20,0x20,0x20,0x10,0xFF,0xFF,0x00,0x00,0x00,0xC0,0xF0,0x18,0x08,0x08,0x08,0x10,0xF8,0xF0,0x10,0x00,/*"d",29*/
	/* (12 X 24 , 宋体 )*/
	'e',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x1F,0x12,0x22,0x22,0x22,0x32,0x1E,0x0E,0x00,0x00,0x00,0xC0,0xF0,0x30,0x18,0x08,0x08,0x08,0x10,0x20,0x00,/*"e",30*/
	/* (12 X 24 , 宋体 )*/
	'f',0x00,0x00,0x00,0x00,0x01,0x03,0x06,0x04,0x04,0x07,0x03,0x00,0x00,0x20,0x20,0x20,0xFF,0xFF,0x20,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,0x00,/*"f",31*/
	/* (12 X 24 , 宋体 )*/
	'g',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0E,0x1F,0x31,0x20,0x20,0x31,0x1F,0x2E,0x20,0x30,0x00,0x0E,0x6E,0xF3,0xB1,0xB1,0xB1,0x91,0x13,0x1E,0x0E,0x00,/*"g",32*/
	/* (12 X 24 , 宋体 )*/
	'h',0x00,0x04,0x07,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x10,0x20,0x20,0x20,0x3F,0x1F,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,/*"h",33*/
	/* (12 X 24 , 宋体 )*/
	'i',0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,/*"i",34*/
	/* (12 X 24 , 宋体 )*/
	'j',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0x3F,0x3F,0x00,0x00,0x00,0x00,0x00,0x03,0x03,0x01,0x01,0x03,0xFE,0xFC,0x00,0x00,0x00,/*"j",35*/
	/* (12 X 24 , 宋体 )*/
	'k',0x00,0x04,0x07,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x01,0x03,0x2F,0x38,0x20,0x20,0x00,0x00,0x00,0x08,0xF8,0xF8,0x88,0x00,0xC0,0xF8,0x38,0x08,0x08,0x00,/*"k",36*/
	/* (12 X 24 , 宋体 )*/
	'l',0x00,0x00,0x04,0x04,0x04,0x07,0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,/*"l",37*/
	/* (12 X 24 , 宋体 )*/
	'm',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x3F,0x10,0x20,0x3F,0x3F,0x10,0x20,0x3F,0x3F,0x00,0x08,0xF8,0xF8,0x08,0x00,0xF8,0xF8,0x08,0x00,0xF8,0xF8,0x08,/*"m",38*/
	/* (12 X 24 , 宋体 )*/
	'n',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x3F,0x10,0x10,0x20,0x20,0x3F,0x1F,0x00,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,0x00,0x08,0xF8,0xF8,0x08,0x00,/*"n",39*/
	/* (12 X 24 , 宋体 )*/
	'o',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x0F,0x18,0x30,0x20,0x20,0x30,0x18,0x0F,0x07,0x00,0x00,0xC0,0xF0,0x30,0x08,0x08,0x08,0x08,0x30,0xF0,0xC0,0x00,/*"o",40*/
	/* (12 X 24 , 宋体 )*/
	'p',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x3F,0x10,0x20,0x20,0x20,0x30,0x1F,0x0F,0x00,0x00,0x01,0xFF,0xFF,0x11,0x09,0x08,0x08,0x38,0xF0,0xC0,0x00,/*"p",41*/
	/* (12 X 24 , 宋体 )*/
	'q',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x1F,0x38,0x20,0x20,0x20,0x10,0x1F,0x3F,0x00,0x00,0x00,0xC0,0xF0,0x18,0x08,0x08,0x09,0x11,0xFF,0xFF,0x01,0x00,/*"q",42*/
	/* (12 X 24 , 宋体 )*/
	'r',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0x3F,0x3F,0x08,0x10,0x20,0x20,0x30,0x30,0x00,0x08,0x08,0x08,0xF8,0xF8,0x08,0x08,0x08,0x00,0x00,0x00,0x00,/*"r",43*/
	/* (12 X 24 , 宋体 )*/
	's',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0C,0x1E,0x33,0x23,0x21,0x21,0x21,0x30,0x38,0x00,0x00,0x00,0x78,0x18,0x08,0x08,0x08,0x88,0x98,0xF0,0x60,0x00,/*"s",44*/
	/* (12 X 24 , 宋体 )*/
	't',0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x20,0xFF,0xFF,0x20,0x20,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF8,0x08,0x08,0x08,0x30,0x00,0x00,/*"t",45*/
	/* (12 X 24 , 宋体 )*/
	'u',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x7F,0x00,0x00,0x00,0x20,0x3F,0x7F,0x00,0x00,0x00,0x00,0xF0,0xF8,0x18,0x08,0x08,0x10,0xF8,0xF0,0x10,0x00,/*"u",46*/
	/* (12 X 24 , 宋体 )*/
	'v',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x30,0x3C,0x3F,0x23,0x00,0x00,0x23,0x3C,0x30,0x20,0x00,0x00,0x00,0x00,0x80,0xF0,0x78,0x70,0x80,0x00,0x00,0x00,/*"v",47*/
	/* (12 X 24 , 宋体 )*/
	'w',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x3C,0x3F,0x23,0x00,0x27,0x3E,0x3F,0x21,0x01,0x3E,0x20,0x00,0x00,0xE0,0xF8,0xE0,0x00,0x00,0xE0,0xF8,0xE0,0x00,0x00,/*"w",48*/
	/* (12 X 24 , 宋体 )*/
	'x',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x38,0x3E,0x27,0x03,0x2C,0x38,0x20,0x20,0x00,0x00,0x08,0x08,0x38,0x68,0x80,0xC8,0xF8,0x38,0x18,0x08,0x00,/*"x",49*/
	/* (12 X 24 , 宋体 )*/
	'y',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x20,0x30,0x3C,0x3F,0x23,0x00,0x23,0x3C,0x20,0x20,0x00,0x00,0x00,0x03,0x01,0x83,0xEC,0x70,0x80,0x00,0x00,0x00,0x00,/*"y",50*/
	/* (12 X 24 , 宋体 )*/
	'z',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x20,0x20,0x23,0x2F,0x3E,0x38,0x20,0x00,0x00,0x00,0x00,0x08,0x38,0xF8,0xE8,0x88,0x08,0x08,0x18,0x70,0x00,/*"z",51*/
	/* (12 X 24 , 宋体 )*/
	'.',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x38,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*".",52*/
	/* (12 X 24 , 宋体 )*/
	'%',0x01,0x06,0x04,0x06,0x01,0x00,0x00,0x00,0x07,0x04,0x00,0x00,0xF0,0x0C,0x04,0x0C,0xF9,0x0E,0x3B,0xEC,0x08,0x0C,0x03,0x00,0x00,0x00,0x08,0x70,0xC0,0x00,0xE0,0x18,0x08,0x18,0xE0,0x00,/*"%",53*/
	/* (12 X 24 , 宋体 )*/
	':',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x70,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x38,0x38,0x38,0x00,0x00,0x00,0x00,/*":",54*/
	/* (12 X 24 , 宋体 )*/
	' ',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*" ",54*/
	/* (12 X 24 , 宋体 )*/
	'-',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*"-",0*/
	',',0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x31,0x32,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

/*********************************************
显示英文或数字字符
入口参数：(x，y) 是显示内容的左上角坐标，c：显示的英文字符，
          color:颜色,b_color:背景颜色。
出口参数: 无
说明：用指定位置上显示单个英文字符或数字字符。
**********************************************/
void GUI_sprintf_char(unsigned int x, unsigned int y,unsigned char c, unsigned int color,unsigned int b_color)
{
	unsigned char temp;
	int i,j;
	unsigned char *src;
	c -= 0x20;
	src = &font16x8[c*16];
	LCD_setwindow(x,y,x+7,y+15);
	for (i = 0;i<16;i++)
	{
		for (j =0; j<8; j++)
		{
			temp = 0x80>>j;
			if (temp &src[i])
			{
				write_data_u16(color);
			}
			else
			{
				write_data_u16(b_color);
			}
		}
	}
}
#pragma CONST_SEG __FAR_SEG BMP_ROM
#include "zh_font.c"
#pragma CONST_SEG __FAR_SEG DEFAULT

unsigned int LCD_PutZH_16(unsigned int x, unsigned int  y, unsigned int c, unsigned int fColor,unsigned int bColor)
{
	unsigned char *__far src;
	unsigned char temp,i,j;
	int len;
	
	src = bmp_zh16X16[c];
	LCD_PutBmp(x,y,15,15,src,fColor,bColor);
	return (x+16);
}

unsigned int LCD_PutString16(unsigned int x, unsigned int y, unsigned char *s, unsigned int fColor, unsigned int bColor)
{
	unsigned int v;
	if(s == NULL)
		return x;
	while(*s)
	{
		if(x>=272)
			return 272;
		if( *s < 0x80)
		{
			GUI_sprintf_char(x,y,*s,fColor,bColor);
			s++;
			x +=8;
		}
		else
		{
			v = s[0] - 0x80;
			v *= 128;
			s++;
			v += s[0] - 0x80;
			x = LCD_PutZH_16(x,y,v,fColor,bColor);
			s++;
		}
	}
	return x;
}




void PutGB2412(unsigned int x, unsigned int  y, unsigned char c, unsigned int fColor,unsigned int bColor)
{
	unsigned int i,j,k,w;
	unsigned int s_x=0,s_y=0;
	unsigned char *src;
	unsigned char temp=0;

	LCD_setwindow(x,y,x+11, y+24-1);
	//LCD_setwindow(0,0,271,479);
	for (k=0; k<sizeof(codeGB_2412)/sizeof(codeGB_2412[0]); k++)
	{
		if (codeGB_2412[k].Index[0]==c)
		{
			for(w=0;w<3;w++)
			{
				src = &codeGB_2412[k].Msk[w*12];
				for (i=0; i<8; i++)
				{
					temp = 0x80>>i;
					for(j=0; j<12; j++)
					{
						
						if (temp & src[j])
						{
							write_data_u16(fColor);
						}
						else
						{
							write_data_u16(bColor);
						}
						
					}
				}
			}
			break;
		}
		
	}
}

void PutCH24x12Multiply(unsigned int x, unsigned int  y, unsigned char c, unsigned int fColor,unsigned int bColor)
{
	unsigned int i,j,k,w;
	unsigned int s_x=0,s_y=0;
	unsigned char *src;
	unsigned char temp=0;

	LCD_setwindow(x,y,x+23, y+47);
	//LCD_setwindow(0,0,271,479);
	for (k=0; k<sizeof(codeGB_2412)/sizeof(codeGB_2412[0]); k++)
	{
		if (codeGB_2412[k].Index[0]==c)
		{
			for(w=0;w<3;w++)
			{
				src = &codeGB_2412[k].Msk[w*12];
				for (i=0; i<8; i++)
				{
					temp = 0x80>>i;
					for(j=0; j<12; j++)
					{
						
						if (temp & src[j])
						{
							write_data_u16(fColor);
							write_data_u16(fColor);
						}
						else
						{
							write_data_u16(bColor);
							write_data_u16(bColor);
						}
						
					}
					for(j=0; j<12; j++)
					{
						
						if (temp & src[j])
						{
							write_data_u16(fColor);
							write_data_u16(fColor);
						}
						else
						{
							write_data_u16(bColor);
							write_data_u16(bColor);
						}
						
					}
				}
				
			}
			break;
		}
		
	}

}
#pragma CONST_SEG __FAR_SEG BMP_ROM
#include "zh_24x24.c"
#pragma CONST_SEG __FAR_SEG DEFAULT

unsigned int LCD_PutZH_24(unsigned int x, unsigned int  y, unsigned int c, unsigned int fColor,unsigned int bColor)
{
	unsigned char * __far src;
	unsigned char temp,i,j;
	int len;
	
	src = bmp_zh24X24[c];
	LCD_PutBmp(x,y,24,24,src,fColor,bColor);
	return (x+24);
}

void ClearStringLine(unsigned int x,unsigned int y)
{
	unsigned int len;
	if(x >= 271)
	{
		return;
	}
	LCD_setwindow(x,  y,271,y+15);
	len = (272 - x)*16;
	while(len--)
	{
		write_data_u16(BLACK);
	}
	
}
void ClearStringLine2(unsigned int x,unsigned int y,unsigned int sx)
{
	unsigned int len;
	if(x >= 271)
	{
		return;
	}
	LCD_setwindow(x,  y,sx-1,y+15);
	len = (sx - x)*16;
	while(len--)
	{
		write_data_u16(BLACK);
	}
	
}



unsigned int LCD_Put24String(unsigned int x, unsigned int y, unsigned char *s, unsigned int fColor, unsigned int bColor)
{
	unsigned int v;
	while(*s)
	{
		if( *s < 0x80)
		{
			PutGB2412(x,y,*s,fColor,bColor);
			//void (unsigned int x, unsigned int  y, unsigned char c, unsigned int fColor,unsigned int bColor)
			s++;
			x +=12;
		}
		else
		{
			v = s[0] - 0x80;
			v *= 128;
			s++;
			v += s[0] - 0x80;
			x = LCD_PutZH_24(x,y,v,fColor,bColor);
			s++;

		}
	}
	return x;
}
unsigned int LCD_Put24CHStringMultiply(unsigned int x, unsigned int y, unsigned char *s, unsigned int fColor, unsigned int bColor)
{
	while(*s)
	{
		PutCH24x12Multiply(x,y,*s++,fColor,bColor);
		x = x + 24;
	}
	return x;
}

const char segment_code[] = {0x3F,0x06,0x5B,0x4F,0X66,0X6D,0X7D,0X07,0X7F,0X6F,0X40};
void SegmentCodeDiv(unsigned int x, unsigned int y, unsigned char code, unsigned int fColor, unsigned int bColor)
{
	unsigned int Color;
	Color = (code &0x01)?fColor:bColor;
	GUI_line(x+1,y+0,x+19,y+0,Color);
	GUI_line(x+2,y+1,x+18,y+1,Color);
	GUI_line(x+3,y+2,x+17,y+2,Color);
	Color = (code &0x02)?fColor:bColor;
	GUI_line(x+18,y+3,x+18,y+14,Color);
	GUI_line(x+19,y+2,x+19,y+16,Color);
	GUI_line(x+20,y+1,x+20,y+15,Color);	
	Color = (code &0x04)?fColor:bColor;
	GUI_line(x+18,y+21,x+18,y+32,Color);
	GUI_line(x+19,y+19,x+19,y+33,Color);
	GUI_line(x+20,y+20,x+20,y+34,Color);	
	Color = (code &0x08)?fColor:bColor;
	GUI_line(x+1,y+35,x+19,y+35,Color);
	GUI_line(x+2,y+34,x+18,y+34,Color);
	GUI_line(x+3,y+33,x+17,y+33,Color);
	Color = (code &0x10)?fColor:bColor;
	GUI_line(x+0,y+20,x+0,y+34,Color);
	GUI_line(x+1,y+19,x+1,y+33,Color);
	GUI_line(x+2,y+21,x+2,y+32,Color);		
	Color = (code &0x20)?fColor:bColor;
	GUI_line(x+2,y+3,x+2,y+14,Color);
	GUI_line(x+1,y+2,x+1,y+16,Color);
	GUI_line(x+0,y+1,x+0,y+15,Color);		
	Color = (code &0x40)?fColor:bColor;
	GUI_line(x+3,y+16,x+17,y+16,Color);
	GUI_line(x+2,y+17,x+18,y+17,Color);
	GUI_line(x+2,y+18,x+18,y+18,Color);
	GUI_line(x+3,y+19,x+17,y+19,Color);
}
unsigned int PutGB21x36(unsigned int x, unsigned int  y, unsigned char c, unsigned int fColor,unsigned int bColor)
{
	if (c == '-')
	{
		SegmentCodeDiv(x,y,segment_code[10],fColor,bColor);
		return (x+21);
	}
	if (c == ' ')
	{
		GUI_box(x,y,x+21,y+36,bColor);
		return (x+21);
	}
	if ((c<'0')||(c>'9'))
	{
		return (x);
	}
	c -= '0';
	SegmentCodeDiv(x,y,segment_code[c],fColor,bColor);
	return (x+21);
}

//!<目前只能显示数字(段码)
unsigned int LCD_Put21String(unsigned int x, unsigned int y, unsigned char *s, unsigned int fColor, unsigned int bColor)
{
	while(*s)
	{
		if( *s < 0x80)
		{
			x = PutGB21x36(x,y,*s++,fColor,bColor);
			x += 8;
		}
	}
	return x;
}

/*********************************************
RGB颜色混合
入口参数：R（红色分量）0-255,G（绿色分量）0-255,B（蓝色分量）0-255
出口参数: 按R5-G6-B5格式混合后的16位颜色码。
说明：将电脑上常见的R8-G8-B8格式转换成8位单片机常用的R5-G6-B5格式。
**********************************************/
unsigned int RGB(unsigned char R,unsigned char G,unsigned char B)
{
	return((unsigned int)(R&0XF8)<<8|(unsigned int)(G&0XFC)<<3|(unsigned int)(B&0XF8)>>3);
}
